## Design Document for Employee Tracking system 
 
### Requirement :  
* Generate the employee login, logout data.  
* Employee can do multiple login and logout in a day 
Calculate the following attribute. 
* Average working time of each employee for last 7 days, 30 days, 60 days, 90 days
* Average absent time of each employee for last 7 days, 30 days, 60 days, 90 days
* Average Expected arrival time of each employee for last 30 days, 60 days, 90 days

### Solution : 
 **Taking consideration** 
 * Employee doesn't work on weekends(saturday and sunday)
 * Employee will come to office in between 9am to 11am
 * Working hours is 9am to 6pm
 
### Flow Diagram
   ![Flow Diagram](https://github.com/jitendrasinghsankhwar/EmployeeTrackingSystem/blob/master/images/flowDiagram.png)
### Sample raw data format generated by generator : 
```json
<!--  Time will be in epoch format -->
[ 
  { "Emp_id" : 31808, "loginTime": "2016-11-26 9:30 am",  "logoutTime": "2016-11-26 10:30 am"},   
  { "Emp_id" : 31808, "loginTime": "2016-11-26 11:30 am",  "logoutTime": "2016-11-26 05:30 pm"} 
] 
```
 
### Generator Alogrithm : 
Generator will generate data daily and save into JSON file. For each day generator will generate one json file.

 Attributes  | computation | comments        |
 ------------ | :-----------: | -----------: |
EmployeeId      |       "emp_" + Random(1000 , 9999)    |      "emp" is intial for all employee and i = 1001    |
loginTime       |          Random(minArrivalTime , maxArrivalTime )         |      intialize minArrivalTime as 9am and maxArrivalTime as 11am      |               
logoutTime       |       Random(maxArrivalTime , maxLogoutTime)      |      intialize maxLogoutTime as 6pm      | 

There are following steps to generate login, logout data of a employee in a day :  
```
Steps 1: choose the  minArrivalTime = 9 , maxArrivalTime = 11 , maxLogoutTime = 18, loginTime = 0, logoutTime = 0; 
<!-- For each employee, each day login, logout time generation -->                                
Step 2: generate random loginTime = Random(minArrivalTime , maxArrivalTime )                                   
Step 3: if(logoutTime - loginTime) > 2hr then repeat Step2                                                   
Step 4: generate random logoutTime = Random(maxArrivalTime , maxLogoutTime)                                       
Step 4: update minArrivalTime and maxArrivalTime values: minArrivalTime = logoutTime, maxArrivalTime = maxLogoutTime       
Step 6: create employee data object using employee id and calculated login and Logout Time                          
Step 7: repeat 2 to 6 steps while(maxArrivalTime + constant (lets assume 20 mins, because probability of coming exact      maxLogoutTime is very less ) <=  maxLogoutTime)                                             
Step 8: Save generated data into json file.                                                            
<!-- Repeat the above steps to generate data for multiple day -->    
```

### Computation Engine Algorithm
 

  
Read the JSON file and calculate the total working time, and total absent time of each user and save it in following format 
Sample Schema to save data for all month:  

**PrimaryKey :** Emp_id, date

  Emp_Id: text  | Working_Time: long | Absent_Time: long | Arival_Time: TIME | date: DATE|
------------   | :-----------:        | :-----------:       |:-----------:   | -----------: |
 emp_01           |       8              |      0              | 9              | 11-11-2016   | 
 emp_02           |       7              |      1              | 10             | 11-11-2016   |                                                                 


### Calculation for per employee :                                                      
* Average working time/week = total_working_Time/ no of weeks                                          
* Average working time/month = total_working_Time/ no of month                                                    
* Average absent time/week = total_absent_Time/ no of weeks                                                       
* Average absent time/month = total_absent_Time/ no of month  

### Calculation for all Employee :                                      
* Average working time/week = total_working_Time for all employee/ no of weeks                                   
* Average working time/month = total_working_Time for all employee/ no of month 
* Average absent time/week = total_absent_Time for all employee/ no of weeks 
* Average absent time/month = total_absent_Time for all employee/ no of month                                       
 
 
#### To calculate the average expected arrival time, take arrival time of all day and  and sort it and take median.  
  
  
 
